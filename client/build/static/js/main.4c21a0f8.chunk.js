(this["webpackJsonpreact-expense-tracker"]=this["webpackJsonpreact-expense-tracker"]||[]).push([[0],{25:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(19),s=n.n(a),o=(n(25),n(0)),i=function(){return Object(o.jsx)("header",{children:Object(o.jsx)("h2",{children:"Expense Tracker"})})},u=n(4),j=n.n(u),l=n(8),d=n(6),b=n(20),p=n(3),O=function(e,t){switch(t.type){case"GET_TRANSACTIONS":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,transactions:t.payload});case"DELETE_TRANSACTION":return Object(p.a)(Object(p.a)({},e),{},{transactions:e.transactions.filter((function(e){return e._id!==t.payload}))});case"ADD_TRANSACTION":return Object(p.a)(Object(p.a)({},e),{},{transactions:[].concat(Object(b.a)(e.transactions),[t.payload])});case"TRANSACTION_ERROR":return Object(p.a)(Object(p.a)({},e),{},{error:t.payload});default:return e}},x=n(9),h=n.n(x),f={transactions:[],error:null,loader:!0},m=Object(r.createContext)(f),y=function(e){var t=e.children,n=Object(r.useReducer)(O,f),c=Object(d.a)(n,2),a=c[0],s=c[1];function i(){return(i=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/api/transactions");case 3:t=e.sent,s({type:"GET_TRANSACTIONS",payload:t.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function u(){return(u=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{h.a.delete("/api/transactions/".concat(t)),s({type:"DELETE_TRANSACTION",payload:t})}catch(n){s({type:"TRANSACTION_ERROR",payload:n.response.data.error})}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(l.a)(j.a.mark((function e(t,n,r){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,h.a.post("/api/transactions",{text:n,amount:r},c);case 4:a=e.sent,s({type:"ADD_TRANSACTION",payload:a.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(o.jsx)(m.Provider,{value:{transactions:a.transactions,loading:a.loading,error:a.error,getTransactions:function(){return i.apply(this,arguments)},deleteTransaction:function(e){return u.apply(this,arguments)},addTransaction:function(e,t,n){return b.apply(this,arguments)},convertCurrency:function(e){return Number(e).toLocaleString("en-US",{style:"currency",currency:"USD"})}},children:t})},v=function(){var e=Object(r.useContext)(m),t=e.transactions,n=e.convertCurrency,c=t.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h4",{children:"Your Balance"}),Object(o.jsx)("h1",{children:n(c)})]})},T=function(){var e=Object(r.useContext)(m),t=e.transactions,n=e.convertCurrency,c=t.map((function(e){return e.amount})),a=c.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),s=(-1*c.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0)).toFixed(2);return Object(o.jsxs)("div",{className:"inc-exp-container",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:"Income"}),Object(o.jsxs)("p",{id:"money-plus",className:"money plus",children:["+",n(a)]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:"Expense"}),Object(o.jsxs)("p",{id:"money-minus",className:"money minus",children:["-",n(s)]})]})]})},N=function(e){var t=e.transaction,n=Object(r.useContext)(m),c=n.deleteTransaction,a=n.convertCurrency;return Object(o.jsxs)("li",{className:t.amount<0?"minus":"plus",children:[t.text," ",Object(o.jsx)("span",{children:a(t.amount)}),Object(o.jsx)("button",{onClick:function(){return c(t._id)},className:"delete-btn",children:"x"})]})},A=function(){var e=Object(r.useContext)(m),t=e.transactions,n=e.getTransactions;return Object(r.useEffect)((function(){n()}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"History"}),Object(o.jsx)("ul",{className:"list",children:t.map((function(e){return Object(o.jsx)(N,{transaction:e},e._id)}))})]})},C=function(){var e=Object(r.useContext)(m),t=e.transactions,n=e.addTransaction,c=Object(r.useState)(""),a=Object(d.a)(c,2),s=a[0],i=a[1],u=Object(r.useState)(0),j=Object(d.a)(u,2),l=j[0],b=j[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{children:"Add new transaction"}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(t.length+1,s,Number(l))},children:[Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsx)("label",{htmlFor:"text",children:"Text"}),Object(o.jsx)("input",{type:"text",value:s,onChange:function(e){return i(e.target.value)},placeholder:"Enter text..."})]}),Object(o.jsxs)("div",{className:"form-control",children:[Object(o.jsxs)("label",{htmlFor:"amount",children:["Amount ",Object(o.jsx)("br",{}),"(negative - expense, positive - income)"]}),Object(o.jsx)("input",{type:"number",value:l,onChange:function(e){return b(e.target.value)},placeholder:"Enter amount..."})]}),Object(o.jsx)("button",{className:"btn",children:"Add transaction"})]})]})};var R=function(){return Object(o.jsxs)(y,{children:[Object(o.jsx)(i,{}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(v,{}),Object(o.jsx)(T,{}),Object(o.jsx)(A,{}),Object(o.jsx)(C,{})]})]})};s.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(R,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.4c21a0f8.chunk.js.map